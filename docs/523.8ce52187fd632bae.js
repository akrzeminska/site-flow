"use strict";(self.webpackChunksite_flow=self.webpackChunksite_flow||[]).push([[523],{3523:(st,C,s)=>{s.r(C),s.d(C,{ConstructionsModule:()=>rt});var d=s(6814),T=s(2787),m=s(5313),y=s(1476),f=s(3566),p=s(7988),c=s(6223),u=s(9347),t=s(5879),_=s(627),U=s(3680),g=s(9157),h=s(2032),I=s(8525),Z=s(2296),b=s(617);function N(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"To pole jest wymagane"),t.qZA())}function k(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"To pole jest wymagane"),t.qZA())}function O(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"To pole jest wymagane"),t.qZA())}function z(e,i){if(1&e&&(t.TgZ(0,"mat-option",20),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.Q6J("value",o),t.xp6(1),t.Oqu(o)}}function S(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"To pole jest wymagane"),t.qZA())}function J(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"To pole jest wymagane"),t.qZA())}function E(e,i){if(1&e&&(t.TgZ(0,"mat-option",20),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.Q6J("value",o),t.xp6(1),t.Oqu(o)}}function M(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," To pole jest wymagane"),t.qZA())}function Q(e,i){if(1&e&&(t.TgZ(0,"mat-option",20),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.Q6J("value",o),t.xp6(1),t.Oqu(o)}}function Y(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," To pole jest wymagane"),t.qZA())}function j(e,i){if(1&e&&(t.TgZ(0,"mat-option",20),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.Q6J("value",o),t.xp6(1),t.Oqu(o)}}function B(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," To pole jest wymagane"),t.qZA())}let v=(()=>{class e{constructor(o,a,n,l){this.dialogRef=o,this.formBuilder=a,this.constructionsService=n,this.data=l,this.saveButtonDisabled=!0,this.isEditMode=!1,this.costSelect=["brak","Kosztorys nr 1","Kosztorys nr 2","Kosztorys nr 3"],this.contactList=[1,2,3,4],this.taskList=[1,2,3,4],this.statusOptions=["W budowie","Planowany","Uko\u0144czony"]}ngOnInit(){this.isEditMode=!!this.data,this.constructionForm=this.formBuilder.group({id:[{value:this.data?this.data.id:null,disabled:!0}],name:[this.data?this.data.name:"",c.kI.required],location:[this.data?this.data.location:"",c.kI.required],client:[this.data?this.data.client:"",c.kI.required],costEstimateId:"brak",manager:[this.data?this.data.manager:"",c.kI.required],contactId:[this.data?this.data.contactId:"",c.kI.required],description:[this.data?this.data.description:""],taskId:[this.data?this.data.taskId:"",c.kI.required],status:[this.data?this.data.status:"",c.kI.required]}),this.isEditMode&&this.constructionForm.get("id")?.disable(),this.statusChangesSubscription=this.constructionForm.statusChanges.subscribe(o=>{this.saveButtonDisabled="VALID"!==o})}ngOnDestroy(){this.statusChangesSubscription.unsubscribe()}clean(){this.constructionForm.reset()}dismiss(){this.dialogRef.close(null)}onSubmit(){if(this.constructionForm.valid){const o=this.constructionForm.getRawValue();console.log("Id konstrukcji:",o.id),o.id&&this.constructionsService.getById(o.id)?this.constructionsService.update(o).subscribe(a=>{console.log("Pomy\u015blnie zaktualizowano"),this.dialogRef.close(a)},a=>{console.error("B\u0142\u0105d podczas aktualizacji danych")}):this.constructionsService.create(o).subscribe(a=>{console.log("Pomy\u015blnie dodano"),this.dialogRef.close(a)})}}static#t=this.\u0275fac=function(a){return new(a||e)(t.Y36(u.so),t.Y36(c.j3),t.Y36(_.E),t.Y36(u.WI))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-feature-dialog"]],decls:72,vars:16,consts:[[1,"title"],["src","./assets/icons/icon006.png","alt","",1,"icon"],["mat-dialog-title",""],[3,"formGroup","ngSubmit"],["matInput","","formControlName","id"],["matInput","","formControlName","name"],[4,"ngIf"],["matInput","","formControlName","location"],["matInput","","formControlName","client"],["formControlName","costEstimateId","required",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","manager"],["formControlName","contactId","multiple","","required",""],["matInput","","formControlName","description"],["formControlName","taskId","multiple","","required",""],["formControlName","status","required",""],[1,"buttons-container"],["mat-button","","color","primary",3,"disabled","click"],[1,"right-buttons-container"],["mat-button","","color","primary",3,"click"],[3,"value"]],template:function(a,n){if(1&a&&(t.TgZ(0,"div",0),t._UZ(1,"img",1),t.TgZ(2,"h2",2),t._uU(3),t.qZA()(),t.TgZ(4,"mat-dialog-content")(5,"form",3),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.TgZ(6,"mat-form-field")(7,"mat-label"),t._uU(8,"Nr"),t.qZA(),t._UZ(9,"input",4),t.qZA(),t.TgZ(10,"mat-form-field")(11,"mat-label"),t._uU(12,"Nazwa"),t.qZA(),t._UZ(13,"input",5),t.YNc(14,N,2,0,"mat-error",6),t.qZA(),t.TgZ(15,"mat-form-field")(16,"mat-label"),t._uU(17,"Lokalizacja"),t.qZA(),t._UZ(18,"input",7),t.YNc(19,k,2,0,"mat-error",6),t.qZA(),t.TgZ(20,"mat-form-field")(21,"mat-label"),t._uU(22,"Klient"),t.qZA(),t._UZ(23,"input",8),t.YNc(24,O,2,0,"mat-error",6),t.qZA(),t.TgZ(25,"mat-form-field")(26,"mat-label"),t._uU(27,"Kosztorys"),t.qZA(),t.TgZ(28,"mat-select",9),t.YNc(29,z,2,2,"mat-option",10),t.YNc(30,S,2,0,"mat-error",6),t.qZA()(),t.TgZ(31,"mat-form-field")(32,"mat-label"),t._uU(33,"Kierownik projektu"),t.qZA(),t._UZ(34,"input",11),t.YNc(35,J,2,0,"mat-error",6),t.qZA(),t.TgZ(36,"mat-form-field")(37,"mat-label"),t._uU(38,"Kontakty"),t.qZA(),t.TgZ(39,"mat-select",12),t.YNc(40,E,2,2,"mat-option",10),t.YNc(41,M,2,0,"mat-error",6),t.qZA()(),t.TgZ(42,"mat-form-field")(43,"mat-label"),t._uU(44,"Opis"),t.qZA(),t._UZ(45,"textarea",13),t.qZA(),t.TgZ(46,"mat-form-field")(47,"mat-label"),t._uU(48,"Zadania"),t.qZA(),t.TgZ(49,"mat-select",14),t.YNc(50,Q,2,2,"mat-option",10),t.YNc(51,Y,2,0,"mat-error",6),t.qZA()(),t.TgZ(52,"mat-form-field")(53,"mat-label"),t._uU(54,"Status"),t.qZA(),t.TgZ(55,"mat-select",15),t.YNc(56,j,2,2,"mat-option",10),t.YNc(57,B,2,0,"mat-error",6),t.qZA()()()(),t.TgZ(58,"mat-dialog-actions",16)(59,"button",17),t.NdJ("click",function(){return n.clean()}),t.TgZ(60,"mat-icon"),t._uU(61,"cancel "),t.qZA(),t._uU(62,"Wyczy\u015b\u0107"),t.qZA(),t.TgZ(63,"div",18)(64,"button",19),t.NdJ("click",function(){return n.dismiss()}),t.TgZ(65,"mat-icon"),t._uU(66,"cancel "),t.qZA(),t._uU(67,"Anuluj"),t.qZA(),t.TgZ(68,"button",17),t.NdJ("click",function(){return n.onSubmit()}),t.TgZ(69,"mat-icon"),t._uU(70,"save "),t.qZA(),t._uU(71,"Zapisz"),t.qZA()()()),2&a){let l,r,A,D,q,w,x,F;t.xp6(3),t.Oqu(n.isEditMode?"Edytowanie budowy":"Dodawanie budowy"),t.xp6(2),t.Q6J("formGroup",n.constructionForm),t.xp6(9),t.Q6J("ngIf",null==(l=n.constructionForm.get("name"))?null:l.hasError("required")),t.xp6(5),t.Q6J("ngIf",null==(r=n.constructionForm.get("location"))?null:r.hasError("required")),t.xp6(5),t.Q6J("ngIf",null==(A=n.constructionForm.get("client"))?null:A.hasError("required")),t.xp6(5),t.Q6J("ngForOf",n.costSelect),t.xp6(1),t.Q6J("ngIf",null==(D=n.constructionForm.get("costEstimateId"))?null:D.hasError("required")),t.xp6(5),t.Q6J("ngIf",null==(q=n.constructionForm.get("manager"))?null:q.hasError("required")),t.xp6(5),t.Q6J("ngForOf",n.contactList),t.xp6(1),t.Q6J("ngIf",null==(w=n.constructionForm.get("contactId"))?null:w.hasError("required")),t.xp6(9),t.Q6J("ngForOf",n.taskList),t.xp6(1),t.Q6J("ngIf",null==(x=n.constructionForm.get("taskId"))?null:x.hasError("required")),t.xp6(5),t.Q6J("ngForOf",n.statusOptions),t.xp6(1),t.Q6J("ngIf",null==(F=n.constructionForm.get("status"))?null:F.hasError("required")),t.xp6(2),t.Q6J("disabled",n.isEditMode),t.xp6(9),t.Q6J("disabled",n.saveButtonDisabled)}},dependencies:[d.sg,d.O5,U.ey,g.KE,g.hX,g.TO,h.Nt,I.gD,Z.lW,b.Hw,u.uh,u.xY,u.H8,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.sg,c.u],styles:[".title[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding-top:20px}.title[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:50px;margin:0 0 16px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.buttons-container[_ngcontent-%COMP%]{display:flex;align-items:center;padding:15px}.buttons-container[_ngcontent-%COMP%]   .right-buttons-container[_ngcontent-%COMP%]{margin-left:auto}.example-additional-selection[_ngcontent-%COMP%]{opacity:.75;font-size:.75em}"]})}return e})();var $=s(1075),R=s(9931),P=s(3477);function K(e,i){if(1&e&&(t.TgZ(0,"th",17),t._uU(1),t.qZA()),2&e){const o=t.oxw().$implicit;t.xp6(1),t.Oqu(o.header)}}function G(e,i){if(1&e&&(t.ynx(0),t._uU(1),t.BQk()),2&e){const o=t.oxw().$implicit,a=t.oxw().$implicit;t.xp6(1),t.hij(" ",a.cell(o)," ")}}function H(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"button",22),t._uU(1),t.TgZ(2,"mat-icon"),t._uU(3,"more_vert"),t.qZA()(),t.TgZ(4,"mat-menu",23,24)(6,"button",25),t.NdJ("click",function(){t.CHM(o);const n=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.editElement(n))}),t.TgZ(7,"mat-icon"),t._uU(8,"edit"),t.qZA(),t.TgZ(9,"span"),t._uU(10,"Edytuj"),t.qZA()(),t.TgZ(11,"button",25),t.NdJ("click",function(){t.CHM(o);const n=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.deleteElement(n.id))}),t.TgZ(12,"mat-icon"),t._uU(13,"delete"),t.qZA(),t.TgZ(14,"span"),t._uU(15,"Usu\u0144"),t.qZA()()()}if(2&e){const o=t.MAs(5),a=t.oxw().$implicit,n=t.oxw().$implicit;t.Q6J("matMenuTriggerFor",o),t.xp6(1),t.Oqu(n.cell(a))}}function L(e,i){if(1&e&&(t.TgZ(0,"td",18),t.YNc(1,G,2,1,"ng-container",19),t.YNc(2,H,16,2,"ng-template",20,21,t.W1O),t.qZA()),2&e){const o=t.MAs(3),a=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf","menu"!==a.columnDef)("ngIfElse",o)}}function W(e,i){1&e&&(t.ynx(0,14),t.YNc(1,K,2,1,"th",15),t.YNc(2,L,4,2,"td",16),t.BQk()),2&e&&t.Q6J("matColumnDef",i.$implicit.columnDef)}function X(e,i){1&e&&t._UZ(0,"tr",26)}function V(e,i){1&e&&t._UZ(0,"tr",27)}function tt(e,i){if(1&e&&(t.TgZ(0,"tr",28)(1,"td",29),t._uU(2),t.qZA()()),2&e){t.oxw();const o=t.MAs(12);t.xp6(2),t.hij('No data matching the filter "',o.value,'"')}}const et=function(){return[5,10,20]},ot=[{path:"**",component:(()=>{class e{constructor(o,a,n,l){this.seederService=o,this.constructionsService=a,this.dialog=n,this.notificationService=l,this.columns=[{columnDef:"name",header:"Nazwa",cell:r=>`${r.name}`},{columnDef:"location",header:"Lokalizacja",cell:r=>`${r.location}`},{columnDef:"client",header:"Klient",cell:r=>`${r.client}`},{columnDef:"cost",header:"Kosztorys",cell:r=>`${r.costEstimateId}`},{columnDef:"manager",header:"Kierownik projektu",cell:r=>`${r.manager}`},{columnDef:"contact",header:"Kontakty",cell:r=>`${r.contactId}`},{columnDef:"desription",header:"Opis",cell:r=>`${r.description}`},{columnDef:"task",header:"Zadania",cell:r=>`${r.taskId}`},{columnDef:"status",header:"Status",cell:r=>`${r.status}`},{columnDef:"menu",header:"",cell:()=>null}],this.displayedColumns=this.columns.map(r=>r.columnDef),o.ensureDataSeeder(),this.dataSource=new m.by}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}ngOnInit(){this.getAllData()}getDataById(){this.constructionsService.getById(1).subscribe(a=>{a?this.dataSource.data=[a]:console.log("Nie znaleziono konstrukcji o podanym id."),console.log("Dane po pobraniu przez getById:",this.dataSource.data)})}getAllData(){this.constructionsService.getAll().subscribe(o=>{o?this.dataSource.data=o:console.log("Nie znaleziono konstrukcji o podanym id."),console.log("Dane po pobraniu przez getAllData:",this.dataSource.data)})}applyFilter(o){this.dataSource.filter=o.target.value.trim().toLowerCase()}editElement(o){this.dialog.open(v,{width:"700px",data:o}).afterClosed().subscribe(n=>{n&&this.refreshTable(),console.log("Okno zosta\u0142o zamkni\u0119te",n)})}deleteElement(o){this.dialog.open($.$,{data:{message:"Czy na pewno chcesz usun\u0105\u0107 ten element?"}}).afterClosed().subscribe(n=>{!0===n&&this.constructionsService.delete(o).subscribe(()=>{this.notificationService.openSnackBar("Element zosta\u0142 pomy\u015blnie usuni\u0119ty","Zamknij"),this.refreshTable()})})}addNewConstruction(){this.dialog.open(v,{width:"700px",data:null}).afterClosed().subscribe(a=>{console.log("Okno zosta\u0142o zamkni\u0119te",a)})}refreshTable(){this.getAllData()}static#t=this.\u0275fac=function(a){return new(a||e)(t.Y36(R.J),t.Y36(_.E),t.Y36(u.uw),t.Y36(P.g))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-constructions"]],viewQuery:function(a,n){if(1&a&&(t.Gf(y.NW,5),t.Gf(f.YE,5),t.Gf(p.p6,5)),2&a){let l;t.iGM(l=t.CRH())&&(n.paginator=l.first),t.iGM(l=t.CRH())&&(n.sort=l.first),t.iGM(l=t.CRH())&&(n.menu=l.first)}},decls:21,vars:7,consts:[[1,"sec"],[1,"title"],[1,"button"],["mat-flat-button","","color","primary",3,"click"],["matInput","","placeholder","Filtruj",3,"keyup"],["input",""],[1,"table-container","mat-elevation-z1"],["mat-table","","matSort","",1,"mat-elevation-z0",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"paginator"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSize","pageSizeOptions"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[4,"ngIf","ngIfElse"],["matMenuContent",""],["menuCell",""],["mat-icon-button","",3,"matMenuTriggerFor"],[1,"custom-menu"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(a,n){1&a&&(t.TgZ(0,"section")(1,"div",0)(2,"div",1)(3,"h1"),t._uU(4,"Budowy"),t.qZA()(),t.TgZ(5,"div",2)(6,"button",3),t.NdJ("click",function(){return n.addNewConstruction()}),t._uU(7,"+ Dodaj"),t.qZA()()()(),t.TgZ(8,"mat-form-field")(9,"mat-label"),t._uU(10,"Filtruj"),t.qZA(),t.TgZ(11,"input",4,5),t.NdJ("keyup",function(r){return n.applyFilter(r)}),t.qZA()(),t.TgZ(13,"div",6)(14,"table",7),t.YNc(15,W,3,1,"ng-container",8),t.YNc(16,X,1,0,"tr",9),t.YNc(17,V,1,0,"tr",10),t.YNc(18,tt,3,1,"tr",11),t.qZA(),t.TgZ(19,"div",12),t._UZ(20,"mat-paginator",13),t.qZA()()),2&a&&(t.xp6(14),t.Q6J("dataSource",n.dataSource),t.xp6(1),t.Q6J("ngForOf",n.columns),t.xp6(1),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(3),t.Q6J("pageSize",5)("pageSizeOptions",t.DdM(6,et)))},dependencies:[d.sg,d.O5,g.KE,g.hX,h.Nt,p.VK,p.OP,p.KA,p.p6,Z.lW,Z.RK,b.Hw,y.NW,f.YE,f.nU,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,m.Ee],styles:[".sec[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin:20px 20px 0}.sec[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{margin-left:30px;margin-bottom:16px}.table-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow-x:auto;overflow-y:auto;width:100vw;background-color:#fff}.mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}th.mat-sort-header-sorted[_ngcontent-%COMP%]{color:#000;background-color:#fafafa}@media only screen and (min-width: 768px){.table-container[_ngcontent-%COMP%]{width:calc(100vw - 300px)}}"]})}return e})()}];let nt=(()=>{class e{static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({imports:[T.Bz.forChild(ot),T.Bz]})}return e})();var at=s(8263),it=s(923);let rt=(()=>{class e{static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({providers:[{provide:_.E,useExisting:it.d}],imports:[d.ez,nt,at.m,c.u5,c.UX,h.c]})}return e})()}}]);