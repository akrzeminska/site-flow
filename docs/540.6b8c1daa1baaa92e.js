"use strict";(self.webpackChunksite_flow=self.webpackChunksite_flow||[]).push([[540],{6540:(Q,u,a)=>{a.r(u),a.d(u,{CostEstimatesModule:()=>q});var g=a(6814),r=a(2787),m=a(3305),t=a(5879),Z=a(9931);let p=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var f=a(9157),h=a(2032),C=a(3176),_=a(2296),x=a(617);function T(e,i){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"mat-expansion-panel")(2,"mat-expansion-panel-header")(3,"mat-panel-title"),t._uU(4),t.qZA(),t.TgZ(5,"mat-panel-description"),t._uU(6),t.TgZ(7,"mat-icon"),t._uU(8,"date_range"),t.qZA()()(),t.TgZ(9,"mat-grid-list",11)(10,"mat-grid-tile"),t._uU(11),t.qZA(),t.TgZ(12,"mat-grid-tile"),t._uU(13),t.qZA(),t.TgZ(14,"mat-grid-tile"),t._uU(15),t.qZA(),t.TgZ(16,"mat-grid-tile"),t._uU(17),t.qZA(),t.TgZ(18,"mat-grid-tile"),t._uU(19),t.qZA(),t.TgZ(20,"mat-grid-tile")(21,"button",12),t.NdJ("click",function(){const c=t.CHM(n).$implicit,d=t.oxw();return t.KtG(d.navigateToDetails(c.id))}),t._uU(22,"Szczeg\xf3\u0142y"),t.qZA()()()(),t.BQk()}if(2&e){const n=i.$implicit;t.xp6(4),t.hij(" ",n.name," "),t.xp6(2),t.hij(" Autor: ",n.author," "),t.xp6(5),t.hij("Opis: ",n.description,""),t.xp6(2),t.hij("Inwestor: ",n.client,""),t.xp6(2),t.hij("Warto\u015b\u0107 kosztorysu: ",n.costEstimateValue," z\u0142"),t.xp6(2),t.hij("Lokalizacja: ",n.location,""),t.xp6(2),t.hij("Umowa nr: ",n.contractNumber,"")}}let A=(()=>{class e{constructor(n,o,s){this.router=n,this.seederService=o,this.costEstimatesService=s,this.dataCostEstimates=[],o.ensureDataSeeder()}ngOnInit(){this.getAllData()}getAllData(){this.costEstimatesService.getAll().subscribe(n=>{n?this.dataCostEstimates=n:console.log("Nie znaleziono kosztorys\xf3w."),console.log("Dane po pobraniu przez getAllData:",this.dataCostEstimates)})}applyFilter(n){}openAllPanels(){this.accordion&&this.accordion.openAll()}closeAllPanels(){this.accordion&&this.accordion.closeAll()}navigateToDetails(n){this.router.navigate(["/costs-estimates/",n.toString()])}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(r.F0),t.Y36(Z.J),t.Y36(p))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-cost-estimates"]],viewQuery:function(o,s){if(1&o&&t.Gf(m.pp,5),2&o){let c;t.iGM(c=t.CRH())&&(s.accordion=c.first)}},decls:21,vars:1,consts:[[1,"in-content"],[1,"sec"],[1,"title"],[1,"button"],["mat-flat-button","","color","primary"],["matInput","","placeholder","Filtruj",3,"keyup"],["input",""],[1,"example-action-buttons"],["mat-button","",3,"click"],["multi","",1,"example-headers-align"],[4,"ngFor","ngForOf"],["cols","3","rowHeight","60px","gutterSize","5px"],["mat-flat-button","","color","primary",3,"click"]],template:function(o,s){1&o&&(t.TgZ(0,"div",0)(1,"section")(2,"div",1)(3,"div",2)(4,"h1"),t._uU(5,"Kosztorysy"),t.qZA()(),t.TgZ(6,"div",3)(7,"button",4),t._uU(8,"+ Dodaj"),t.qZA()()()(),t.TgZ(9,"mat-form-field")(10,"mat-label"),t._uU(11,"Filtruj"),t.qZA(),t.TgZ(12,"input",5,6),t.NdJ("keyup",function(d){return s.applyFilter(d)}),t.qZA()(),t.TgZ(14,"div",7)(15,"button",8),t.NdJ("click",function(){return s.openAllPanels()}),t._uU(16,"Poka\u017c wszystko"),t.qZA(),t.TgZ(17,"button",8),t.NdJ("click",function(){return s.closeAllPanels()}),t._uU(18,"Ukryj wszystko"),t.qZA()(),t.TgZ(19,"mat-accordion",9),t.YNc(20,T,23,7,"ng-container",10),t.qZA()()),2&o&&(t.xp6(20),t.Q6J("ngForOf",s.dataCostEstimates))},dependencies:[g.sg,f.KE,f.hX,h.Nt,m.pp,m.ib,m.yz,m.yK,m.u4,C.Il,C.DX,_.lW,x.Hw],styles:[".in-content[_ngcontent-%COMP%]{width:100%}.sec[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin:20px 20px 0}.sec[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:30px;margin-bottom:16px}mat-form-field[_ngcontent-%COMP%]{width:100%}.example-action-buttons[_ngcontent-%COMP%]{padding-bottom:20px}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}.example-headers-align[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%] + .mat-mdc-form-field[_ngcontent-%COMP%]{margin-left:8px}mat-grid-tile[_ngcontent-%COMP%]{background:#fafafa}@media only screen and (min-width: 1024px){.in-content[_ngcontent-%COMP%]{width:calc(100vw - 300px)}}"]})}return e})();var D=a(6385),l=a(5313);function E(e,i){1&e&&(t.TgZ(0,"th",15),t._uU(1," Lp "),t.qZA())}function v(e,i){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",n.Lp," ")}}function b(e,i){1&e&&(t.TgZ(0,"th",15),t._uU(1," Nazwa "),t.qZA())}function z(e,i){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",n.Nazwa," ")}}function M(e,i){1&e&&(t.TgZ(0,"th",15),t._uU(1," Ilo\u015b\u0107 "),t.qZA())}function U(e,i){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",n.Ilo\u015b\u0107," ")}}function w(e,i){1&e&&(t.TgZ(0,"th",15),t._uU(1," J.m. "),t.qZA())}function O(e,i){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",n["J.m."]," ")}}function j(e,i){1&e&&(t.TgZ(0,"th",15),t._uU(1," Cena j.m. (M+R) "),t.qZA())}function k(e,i){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",n["Cena j.m. (M+R)"]," ")}}function P(e,i){1&e&&(t.TgZ(0,"th",15),t._uU(1," Warto\u015b\u0107 "),t.qZA())}function N(e,i){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",n.Warto\u015b\u0107," ")}}function S(e,i){1&e&&t._UZ(0,"tr",17)}function B(e,i){1&e&&t._UZ(0,"tr",18)}const Y=[{path:":id",component:(()=>{class e{constructor(n,o){this.route=n,this.costEstimatesService=o,this.displayedColumns=["no","name","amount","symbol","price","value"]}ngOnInit(){this.route.params.subscribe(n=>{console.log(n.id),this.objectId=n.id}),this.getDataById(this.objectId),this.getDataAllWorks(this.objectId)}getDataById(n){this.costEstimatesService.getById(n).subscribe(o=>{o?this.dataSourceTable=[o]:console.log("Nie znaleziono kosztorysu o podanym id."),console.log("Dane po pobraniu przez getById:",this.dataSourceTable)})}getDataAllWorks(n){this.costEstimatesService.getAllWorks(n).subscribe(o=>{o?this.dataAllWorks=o:console.log("Nie znaleziono rob\xf3t w podanym kosztorysie"),console.log("Dane po pobraniu getAllWorks",this.dataAllWorks)})}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(r.gz),t.Y36(p))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-cost-estimates-details"]],decls:31,vars:4,consts:[[1,"sec"],[1,"title"],[1,"button"],["mat-flat-button","","color","primary"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","no"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","amount"],["matColumnDef","symbol"],["matColumnDef","price"],["matColumnDef","value"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(o,s){1&o&&(t.TgZ(0,"section")(1,"div",0)(2,"div",1)(3,"h1"),t._uU(4),t.qZA()(),t.TgZ(5,"div",2)(6,"button",3),t._uU(7,"+ Edytuj"),t.qZA()()()(),t._UZ(8,"mat-divider"),t.TgZ(9,"table",4),t.ynx(10,5),t.YNc(11,E,2,0,"th",6),t.YNc(12,v,2,1,"td",7),t.BQk(),t.ynx(13,8),t.YNc(14,b,2,0,"th",6),t.YNc(15,z,2,1,"td",7),t.BQk(),t.ynx(16,9),t.YNc(17,M,2,0,"th",6),t.YNc(18,U,2,1,"td",7),t.BQk(),t.ynx(19,10),t.YNc(20,w,2,0,"th",6),t.YNc(21,O,2,1,"td",7),t.BQk(),t.ynx(22,11),t.YNc(23,j,2,0,"th",6),t.YNc(24,k,2,1,"td",7),t.BQk(),t.ynx(25,12),t.YNc(26,P,2,0,"th",6),t.YNc(27,N,2,1,"td",7),t.BQk(),t.YNc(28,S,1,0,"tr",13),t.YNc(29,B,1,0,"tr",14),t.qZA(),t._UZ(30,"br")),2&o&&(t.xp6(4),t.hij("Szczeg\xf3\u0142y kosztorysu nr ",s.objectId,""),t.xp6(5),t.Q6J("dataSource",s.dataAllWorks),t.xp6(19),t.Q6J("matHeaderRowDef",s.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",s.displayedColumns))},dependencies:[D.d,_.lW,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk],styles:[".sec[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin:20px 20px 0}.sec[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:30px;margin-bottom:16px}.mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}.example-action-buttons[_ngcontent-%COMP%]{padding-bottom:20px}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}.example-headers-align[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%] + .mat-mdc-form-field[_ngcontent-%COMP%]{margin-left:8px}mat-grid-tile[_ngcontent-%COMP%]{background:#fafafa}table[_ngcontent-%COMP%]{width:100%}.mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}"]})}return e})()},{path:"**",component:A}];let I=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[r.Bz.forChild(Y),r.Bz]})}return e})();var F=a(8263),y=a(2096),J=a(7398);let W=(()=>{class e extends p{constructor(){super(),this.costEstimates=[],this.allWorks=[]}getById(n){const s=localStorage.getItem(`costEstimate_${n}`);return(0,y.of)(s)}getAll(){for(let n in localStorage)if(n.startsWith("costEstimate_")){const o=localStorage.getItem(n);if(o){const s=JSON.parse(o);this.costEstimates.push(s)}}return this.costEstimates.sort((n,o)=>n.id-o.id),(0,y.of)(this.costEstimates)}getAllWorks(n){return this.getById(n).pipe((0,J.U)(o=>JSON.parse(o||{}).allWorks||[]))}create(n){throw new Error("Method not implemented.")}update(n){throw new Error("Method not implemented.")}delete(n){throw new Error("Method not implemented.")}static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),q=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({providers:[{provide:p,useExisting:W}],imports:[g.ez,I,F.m,h.c]})}return e})()}}]);